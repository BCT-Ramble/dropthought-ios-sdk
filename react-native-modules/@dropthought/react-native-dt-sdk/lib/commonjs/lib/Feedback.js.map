{"version":3,"names":["_API","require","_FeedbacksUploader","submitFeedback","surveyFeedback","apiPostEvent","programId","surveyId","feedbacks","metadata","createdTime","timeZone","timeout","catch","error","saveFeedback","exports","FeedbacksQueue","enqueue"],"sources":["Feedback.js"],"sourcesContent":["import { apiPostEvent } from './API';\nimport { FeedbacksQueue } from './FeedbacksUploader';\n\n/**\n * the format is to fit in the react-async deferFn\n * @param {[SurveyFeedback]} surveyFeedback\n */\nexport const submitFeedback = async ([surveyFeedback]) => {\n  return apiPostEvent(\n    {\n      programId: surveyFeedback.surveyId,\n      feedbacks: surveyFeedback.feedbacks,\n      metadata: surveyFeedback.metadata,\n      createdTime: surveyFeedback.createdTime,\n      timeZone: surveyFeedback.timeZone,\n    },\n    {\n      // use shorter timeout here,\n      timeout: 10000,\n    }\n  ).catch((error) => {\n    // save result when there's error\n    // TODO: maybe there're some errors no need to be saved?\n    saveFeedback(surveyFeedback);\n    throw error;\n  });\n};\n\n/**\n * @param {SurveyFeedback} surveyFeedback\n */\nexport const saveFeedback = async (surveyFeedback) => {\n  return FeedbacksQueue.enqueue(surveyFeedback);\n};\n\n/**@typedef {import('../data').Feedback} Feedback */\n/**@typedef {import('../data').SurveyFeedback} SurveyFeedback */\n"],"mappings":";;;;;;AAAA,IAAAA,IAAA,GAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AAEA;AACA;AACA;AACA;AACO,MAAME,cAAc,GAAG,MAAAA,CAAO,CAACC,cAAc,CAAC,KAAK;EACxD,OAAO,IAAAC,iBAAY,EACjB;IACEC,SAAS,EAAEF,cAAc,CAACG,QAAQ;IAClCC,SAAS,EAAEJ,cAAc,CAACI,SAAS;IACnCC,QAAQ,EAAEL,cAAc,CAACK,QAAQ;IACjCC,WAAW,EAAEN,cAAc,CAACM,WAAW;IACvCC,QAAQ,EAAEP,cAAc,CAACO;EAC3B,CAAC,EACD;IACE;IACAC,OAAO,EAAE;EACX,CACF,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAK;IACjB;IACA;IACAC,YAAY,CAACX,cAAc,CAAC;IAC5B,MAAMU,KAAK;EACb,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AAFAE,OAAA,CAAAb,cAAA,GAAAA,cAAA;AAGO,MAAMY,YAAY,GAAG,MAAOX,cAAc,IAAK;EACpD,OAAOa,iCAAc,CAACC,OAAO,CAACd,cAAc,CAAC;AAC/C,CAAC;;AAED;AACA;AAAAY,OAAA,CAAAD,YAAA,GAAAA,YAAA"}