{"version":3,"names":["React","useBackHandler","EndScreenLayout","useSurvey","useSurveyContext","useOnSubmitSuccessCallback","useOnSubmitCallback","useBackForDismiss","onClose","backHandler","useCallback","EndScreen","error","surveyFeedback","survey","onSubmitSuccessCallback","onSubmitCallback","useEffect","createElement"],"sources":["EndScreen.js"],"sourcesContent":["import React from 'react';\nimport { useBackHandler } from '@react-native-community/hooks';\nimport { EndScreenLayout } from '@dropthought/react-native-ui/src';\nimport { useSurvey, useSurveyContext } from '../contexts/survey';\nimport {\n  useOnSubmitSuccessCallback,\n  useOnSubmitCallback,\n} from '../contexts/custom-props';\n\nconst useBackForDismiss = () => {\n  const { onClose } = useSurveyContext();\n  const backHandler = React.useCallback(() => {\n    onClose();\n    return true;\n  }, [onClose]);\n\n  useBackHandler(backHandler);\n};\n\n/**\n * @type {React.FunctionComponent<ScreenProps>}\n * @param {ScreenProps} props\n */\nconst EndScreen = ({ error, surveyFeedback, onClose }) => {\n  const survey = useSurvey();\n  const onSubmitSuccessCallback = useOnSubmitSuccessCallback();\n  const onSubmitCallback = useOnSubmitCallback();\n\n  React.useEffect(() => {\n    // passing data to native, if error is undefined, null, 0, it means success\n    if (onSubmitCallback) {\n      onSubmitCallback(surveyFeedback, error);\n      // deprecate later\n      if (!error && onSubmitSuccessCallback) {\n        onSubmitSuccessCallback(surveyFeedback);\n      }\n    }\n    // if (surveyFeedback)\n    //     SurveyNativeBridge.onFeedbackResult(surveyFeedback, error || 0)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useBackForDismiss();\n  return <EndScreenLayout survey={survey} onClose={onClose} />;\n};\n\nexport default EndScreen;\n\n/**\n * @typedef {import('../../data').SurveyFeedback} SurveyFeedback\n */\n\n/**\n * @typedef {Object} ScreenProps\n * @property {Error=} error\n * @property {SurveyFeedback=} surveyFeedback\n * @property {() => void} onClose\n */\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,QAAQ,+BAA+B;AAC9D,SAASC,eAAe,QAAQ,kCAAkC;AAClE,SAASC,SAAS,EAAEC,gBAAgB,QAAQ,oBAAoB;AAChE,SACEC,0BAA0B,EAC1BC,mBAAmB,QACd,0BAA0B;AAEjC,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAC9B,MAAM;IAAEC;EAAQ,CAAC,GAAGJ,gBAAgB,CAAC,CAAC;EACtC,MAAMK,WAAW,GAAGT,KAAK,CAACU,WAAW,CAAC,MAAM;IAC1CF,OAAO,CAAC,CAAC;IACT,OAAO,IAAI;EACb,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEbP,cAAc,CAACQ,WAAW,CAAC;AAC7B,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAME,SAAS,GAAGA,CAAC;EAAEC,KAAK;EAAEC,cAAc;EAAEL;AAAQ,CAAC,KAAK;EACxD,MAAMM,MAAM,GAAGX,SAAS,CAAC,CAAC;EAC1B,MAAMY,uBAAuB,GAAGV,0BAA0B,CAAC,CAAC;EAC5D,MAAMW,gBAAgB,GAAGV,mBAAmB,CAAC,CAAC;EAE9CN,KAAK,CAACiB,SAAS,CAAC,MAAM;IACpB;IACA,IAAID,gBAAgB,EAAE;MACpBA,gBAAgB,CAACH,cAAc,EAAED,KAAK,CAAC;MACvC;MACA,IAAI,CAACA,KAAK,IAAIG,uBAAuB,EAAE;QACrCA,uBAAuB,CAACF,cAAc,CAAC;MACzC;IACF;IACA;IACA;IACA;EACF,CAAC,EAAE,EAAE,CAAC;EAENN,iBAAiB,CAAC,CAAC;EACnB,oBAAOP,KAAA,CAAAkB,aAAA,CAAChB,eAAe;IAACY,MAAM,EAAEA,MAAO;IAACN,OAAO,EAAEA;EAAQ,CAAE,CAAC;AAC9D,CAAC;AAED,eAAeG,SAAS;;AAExB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA"}