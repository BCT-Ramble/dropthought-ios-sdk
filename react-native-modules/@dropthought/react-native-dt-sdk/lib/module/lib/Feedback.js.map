{"version":3,"names":["apiPostEvent","FeedbacksQueue","submitFeedback","surveyFeedback","programId","surveyId","feedbacks","metadata","createdTime","timeZone","timeout","catch","error","saveFeedback","enqueue"],"sources":["Feedback.js"],"sourcesContent":["import { apiPostEvent } from './API';\nimport { FeedbacksQueue } from './FeedbacksUploader';\n\n/**\n * the format is to fit in the react-async deferFn\n * @param {[SurveyFeedback]} surveyFeedback\n */\nexport const submitFeedback = async ([surveyFeedback]) => {\n  return apiPostEvent(\n    {\n      programId: surveyFeedback.surveyId,\n      feedbacks: surveyFeedback.feedbacks,\n      metadata: surveyFeedback.metadata,\n      createdTime: surveyFeedback.createdTime,\n      timeZone: surveyFeedback.timeZone,\n    },\n    {\n      // use shorter timeout here,\n      timeout: 10000,\n    }\n  ).catch((error) => {\n    // save result when there's error\n    // TODO: maybe there're some errors no need to be saved?\n    saveFeedback(surveyFeedback);\n    throw error;\n  });\n};\n\n/**\n * @param {SurveyFeedback} surveyFeedback\n */\nexport const saveFeedback = async (surveyFeedback) => {\n  return FeedbacksQueue.enqueue(surveyFeedback);\n};\n\n/**@typedef {import('../data').Feedback} Feedback */\n/**@typedef {import('../data').SurveyFeedback} SurveyFeedback */\n"],"mappings":"AAAA,SAASA,YAAY,QAAQ,OAAO;AACpC,SAASC,cAAc,QAAQ,qBAAqB;;AAEpD;AACA;AACA;AACA;AACA,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAO,CAACC,cAAc,CAAC,KAAK;EACxD,OAAOH,YAAY,CACjB;IACEI,SAAS,EAAED,cAAc,CAACE,QAAQ;IAClCC,SAAS,EAAEH,cAAc,CAACG,SAAS;IACnCC,QAAQ,EAAEJ,cAAc,CAACI,QAAQ;IACjCC,WAAW,EAAEL,cAAc,CAACK,WAAW;IACvCC,QAAQ,EAAEN,cAAc,CAACM;EAC3B,CAAC,EACD;IACE;IACAC,OAAO,EAAE;EACX,CACF,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAK;IACjB;IACA;IACAC,YAAY,CAACV,cAAc,CAAC;IAC5B,MAAMS,KAAK;EACb,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,YAAY,GAAG,MAAOV,cAAc,IAAK;EACpD,OAAOF,cAAc,CAACa,OAAO,CAACX,cAAc,CAAC;AAC/C,CAAC;;AAED;AACA"}