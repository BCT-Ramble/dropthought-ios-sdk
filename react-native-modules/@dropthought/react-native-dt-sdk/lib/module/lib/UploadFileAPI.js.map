{"version":3,"names":["isNil","isEmpty","fetcherInstance","throwRequestError","UPLOAD_PATH","uploadFile","file","axiosConfig","fetcher","formData","FormData","append","params","method","authRequired","headers","questionType","body","request","then","response","data","success"],"sources":["UploadFileAPI.js"],"sourcesContent":["import { isNil, isEmpty } from 'ramda';\n\nimport { fetcherInstance } from './APIClient';\nimport { throwRequestError } from './Fetcher';\n\nconst UPLOAD_PATH = '/api/event/storage/file';\n\n/**\n * @param {ImageFormData} file\n * @param {AxiosRequestConfig} axiosConfig\n * @param {Fetcher=} fetcher\n * @returns {Promise<UploadFileResult>}\n */\nexport async function uploadFile(\n  file,\n  axiosConfig = {},\n  fetcher = fetcherInstance\n) {\n  let formData = new FormData();\n  // @ts-ignore\n  formData.append('file', file);\n\n  /** @type {AxiosRequestConfig} */\n  const params = {\n    method: 'POST',\n    authRequired: true,\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n    params: {\n      questionType: 'pictureChoice',\n    },\n    body: formData,\n    ...axiosConfig,\n  };\n\n  return fetcher.request(UPLOAD_PATH, params).then((response) => {\n    if (response.data.success === false) {\n      throwRequestError(response);\n      return;\n    }\n    return response.data;\n  });\n}\n\n/**\n * @typedef {Object} ImageFormData\n * @property {string} uri\n * @property {string} name\n * @property {string} type\n */\n\n/**\n * @typedef {Object} UploadFileResult\n * @property {number} sizeInMB\n * @property {boolean} success\n * @property {string} url\n */\n"],"mappings":"AAAA,SAASA,KAAK,EAAEC,OAAO,QAAQ,OAAO;AAEtC,SAASC,eAAe,QAAQ,aAAa;AAC7C,SAASC,iBAAiB,QAAQ,WAAW;AAE7C,MAAMC,WAAW,GAAG,yBAAyB;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,UAAUA,CAC9BC,IAAI,EACJC,WAAW,GAAG,CAAC,CAAC,EAChBC,OAAO,GAAGN,eAAe,EACzB;EACA,IAAIO,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC7B;EACAD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEL,IAAI,CAAC;;EAE7B;EACA,MAAMM,MAAM,GAAG;IACbC,MAAM,EAAE,MAAM;IACdC,YAAY,EAAE,IAAI;IAClBC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDH,MAAM,EAAE;MACNI,YAAY,EAAE;IAChB,CAAC;IACDC,IAAI,EAAER,QAAQ;IACd,GAAGF;EACL,CAAC;EAED,OAAOC,OAAO,CAACU,OAAO,CAACd,WAAW,EAAEQ,MAAM,CAAC,CAACO,IAAI,CAAEC,QAAQ,IAAK;IAC7D,IAAIA,QAAQ,CAACC,IAAI,CAACC,OAAO,KAAK,KAAK,EAAE;MACnCnB,iBAAiB,CAACiB,QAAQ,CAAC;MAC3B;IACF;IACA,OAAOA,QAAQ,CAACC,IAAI;EACtB,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA"}