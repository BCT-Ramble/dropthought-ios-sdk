{"version":3,"sources":["SmileyRatingQuestionOption2.tsx"],"names":["React","View","StyleSheet","Text","Platform","Option1BackgroundColor","Option1BackgroundColorDark","i18n","DimensionWidthType","useDimensionWidthType","scaleLogic","WheelPicker","SurveyFooter","SurveyHeader","LottieView","useTheme","COLOR_SCHEMES","MandatoryTitle","isNil","lotties","require","SmileyRatingQuestionOption2","survey","pageIndex","question","forgot","onClose","onPrevPage","onNextPage","onFeedback","feedback","answered","answers","answeredValue","parseInt","hexCode","backgroundColor","themeBackgroundColor","fontColor","colorScheme","questionId","options","scale","selectedIndex","setSelectedIndex","useState","hasSelected","scaleLogicList","lottieSelectedIndex","setSelectedAndFeedback","useCallback","index","type","handleSelected","descriptions","map","_","dummyDescroptions","dimensionWidthType","isPhone","phone","styles","phoneStyles","tabletStyles","selectedBackgroundColor","dark","unselectedBackgroundColor","questionContainerStyle","commonStyles","container","hintTextStyle","hintText","color","itemTextStyle","infoContainer","mandatoryErrorMessage","centerContainer","wheelContainer","selectedIndicatorStyle","OS","undefined","t","submitSurvey","pageOrder","length","memo","create","flex","paddingHorizontal","height","alignItems","justifyContent","marginBottom","width","opacity","fontSize","paddingVertical","textAlign","fontWeight"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,IAA3B,EAAiCC,QAAjC,QAAiD,cAAjD;AACA,SAASC,sBAAT,EAAiCC,0BAAjC,QAAmE,WAAnE;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,SACEC,kBADF,EAEEC,qBAFF,QAGO,8BAHP;AASA,SAASC,UAAT,QAA2B,eAA3B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,SAASC,QAAT,EAAmBC,aAAnB,QAAwC,mBAAxC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAASC,KAAT,QAAsB,OAAtB;AAEA,MAAMC,OAAO,GAAG,CACdC,OAAO,CAAC,oDAAD,CADO,EAEdA,OAAO,CAAC,oDAAD,CAFO,EAGdA,OAAO,CAAC,oDAAD,CAHO,EAIdA,OAAO,CAAC,oDAAD,CAJO,EAKdA,OAAO,CAAC,oDAAD,CALO,CAAhB;;AAqCA,MAAMC,2BAA2B,GAAG,CAAC;AACnCC,EAAAA,MADmC;AAEnCC,EAAAA,SAFmC;AAGnCC,EAAAA,QAHmC;AAInCC,EAAAA,MAJmC;AAKnCC,EAAAA,OALmC;AAMnCC,EAAAA,UANmC;AAOnCC,EAAAA,UAPmC;AAQnCC,EAAAA,UARmC;AASnCC,EAAAA;AATmC,CAAD,KAUvB;AACX,QAAMC,QAAQ,GACZD,QAAQ,IACRA,QAAQ,CAACE,OADT,IAEA,CAACd,KAAK,CAACY,QAAQ,CAACE,OAAT,CAAiB,CAAjB,CAAD,CAFN,IAGA,OAAOF,QAAQ,CAACE,OAAT,CAAiB,CAAjB,CAAP,KAA+B,QAJjC;AAKA,QAAMC,aAAqB,GAAGF,QAAQ,GAClCG,QAAQ,CAACJ,QAAQ,CAACE,OAAT,CAAiB,CAAjB,CAAD,EAAsB,EAAtB,CAD0B,GAElC,CAFJ;AAIA,QAAM;AACJG,IAAAA,OADI;AAEJC,IAAAA,eAAe,EAAEC,oBAFb;AAGJC,IAAAA,SAHI;AAIJC,IAAAA;AAJI,MAKFxB,QAAQ,EALZ;AAMA,QAAM;AAAEyB,IAAAA,UAAF;AAAcC,IAAAA,OAAd;AAAuBC,IAAAA;AAAvB,MAAiClB,QAAvC;AACA,QAAM,CAACmB,aAAD,EAAgBC,gBAAhB,IAAoC5C,KAAK,CAAC6C,QAAN,CACxCd,QAAQ,GAAGE,aAAH,GAAmB,CAAC,CADY,CAA1C;AAGA,QAAMa,WAAW,GAAGH,aAAa,GAAG,CAAC,CAArC;AAEA,QAAMI,cAAc,GAAGrC,UAAU,CAACgC,KAAD,CAAjC;AACA,QAAMM,mBAAmB,GAAGD,cAAc,CAACJ,aAAD,CAA1C;AAEA,QAAMM,sBAAsB,GAAGjD,KAAK,CAACkD,WAAN,CAC5BC,KAAD,IAAW;AACTtB,IAAAA,UAAU,CAAC;AACTW,MAAAA,UADS;AAETR,MAAAA,OAAO,EAAE,CAACmB,KAAD,CAFA;AAGTC,MAAAA,IAAI,EAAE;AAHG,KAAD,CAAV;AAKD,GAP4B,EAQ7B,CAACvB,UAAD,EAAaW,UAAb,CAR6B,CAA/B;;AAWA,QAAMa,cAAc,GAAIF,KAAD,IAAmB;AACxCP,IAAAA,gBAAgB,CAACO,KAAD,CAAhB;AACAF,IAAAA,sBAAsB,CAACE,KAAD,CAAtB;AACD,GAHD;;AAKA,QAAMG,YAAY,GAAGP,cAAc,CAACQ,GAAf,CAAmB,CAACC,CAAD,EAAIL,KAAJ,KAAcV,OAAO,CAACU,KAAD,CAAxC,CAArB;AACA,QAAMM,iBAAiB,GAAG,CAAC,QAAD,EAAW,GAAGH,YAAd,CAA1B;AAEA,QAAMI,kBAAkB,GAAGjD,qBAAqB,EAAhD;AACA,QAAMkD,OAAO,GAAGD,kBAAkB,KAAKlD,kBAAkB,CAACoD,KAA1D;AACA,QAAMC,MAAM,GAAGF,OAAO,GAAGG,WAAH,GAAiBC,YAAvC;AAEA,QAAMC,uBAAuB,GAC3BzB,WAAW,KAAKvB,aAAa,CAACiD,IAA9B,GACI3D,0BADJ,GAEID,sBAHN;AAKA,QAAM6D,yBAAyB,GAAG7B,oBAAlC;AAEA,QAAMD,eAAe,GAAGU,WAAW,GAC/BkB,uBAAuB,CAAChB,mBAAD,CADQ,GAE/BkB,yBAFJ;AAIA,QAAMC,sBAAsB,GAAG,CAACC,YAAY,CAACC,SAAd,EAAyB;AAAEjC,IAAAA;AAAF,GAAzB,CAA/B;AAEA,QAAMkC,aAAa,GAAG,CAACT,MAAM,CAACU,QAAR,EAAkB;AAAEC,IAAAA,KAAK,EAAElC;AAAT,GAAlB,CAAtB;AACA,QAAMmC,aAAa,GAAG,CAACL,YAAY,CAACK,aAAd,EAA6B;AAAED,IAAAA,KAAK,EAAElC;AAAT,GAA7B,CAAtB;AAEA,sBACE,uDACE,oBAAC,YAAD;AACE,IAAA,MAAM,EAAEhB,MADV;AAEE,IAAA,SAAS,EAAEC,SAFb;AAGE,IAAA,eAAe,EAAEa,eAHnB;AAIE,IAAA,OAAO,EAAEV;AAJX,IADF,eAOE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEyC;AAAb,KACGrC,QAAQ,IAAIgB,WAAZ,gBACC,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEsB,YAAY,CAACM;AAA1B,kBACE,oBAAC,cAAD;AACE,IAAA,QAAQ,EAAElD,QADZ;AAEE,IAAA,qBAAqB,EAAEF,MAAM,CAACqD,qBAFhC;AAGE,IAAA,MAAM,EAAElD;AAHV,IADF,eAME,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE2C,YAAY,CAACQ;AAA1B,kBACE,oBAAC,UAAD;AACE,IAAA,MAAM,EAAEzD,OAAO,CAAC6B,mBAAD,CADjB;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,KAAK,EAAE;AAHT,IADF,CANF,eAaE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEoB,YAAY,CAACS;AAA1B,kBACE,oBAAC,WAAD;AACE,IAAA,aAAa,EAAElC,aADjB;AAEE,IAAA,OAAO,EAAEW,YAFX;AAGE,IAAA,QAAQ,EAAGH,KAAD,IAAW;AACnB,UAAIA,KAAK,GAAG,CAAC,CAAb,EAAgBE,cAAc,CAACF,KAAD,CAAd;AACjB,KALH;AAME,IAAA,aAAa,EAAEsB,aANjB;AAOE,IAAA,sBAAsB,EAAEL,YAAY,CAACU,sBAPvC;AAQE,IAAA,GAAG,EAAE,0BARP;AASE,IAAA,UAAU,EAAE1E,QAAQ,CAAC2E,EAAT,KAAgB,SAAhB,GAA4B,EAA5B,GAAiCC;AAT/C,IADF,CAbF,CADD,gBA6BC,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEZ,YAAY,CAACM;AAA1B,kBACE,oBAAC,cAAD;AACE,IAAA,QAAQ,EAAElD,QADZ;AAEE,IAAA,qBAAqB,EAAEF,MAAM,CAACqD,qBAFhC;AAGE,IAAA,MAAM,EAAElD;AAHV,IADF,eAME,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE2C,YAAY,CAACQ;AAA1B,kBACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEN;AAAb,KACG/D,IAAI,CAAC0E,CAAL,CAAO,8BAAP,CADH,CADF,CANF,eAWE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEb,YAAY,CAACS;AAA1B,kBACE,oBAAC,WAAD;AACE,IAAA,aAAa,EAAE,CADjB;AAEE,IAAA,OAAO,EAAEpB,iBAFX;AAGE,IAAA,QAAQ,EAAGN,KAAD,IAAW;AACnBE,MAAAA,cAAc,CAACF,KAAK,GAAG,CAAT,CAAd;AACD,KALH;AAME,IAAA,aAAa,EAAEsB,aANjB;AAOE,IAAA,sBAAsB,EAAEL,YAAY,CAACU,sBAPvC;AAQE,IAAA,GAAG,EAAE,+BARP;AASE,IAAA,UAAU,EAAE1E,QAAQ,CAAC2E,EAAT,KAAgB,SAAhB,GAA4B,EAA5B,GAAiCC;AAT/C,IADF,CAXF,CA9BJ,CAPF,eAgEE,oBAAC,YAAD;AACE,IAAA,YAAY,EAAE1D,MAAM,CAAC4D,YADvB;AAEE,IAAA,WAAW,EAAE/C,OAFf;AAGE,IAAA,WAAW,EAAEZ,SAAS,KAAK,CAH7B;AAIE,IAAA,UAAU,EAAEA,SAAS,KAAKD,MAAM,CAAC6D,SAAP,CAAiBC,MAAjB,GAA0B,CAJtD;AAKE,IAAA,UAAU,EAAEzD,UALd;AAME,IAAA,UAAU,EAAEC,UANd;AAOE,IAAA,eAAe,EAAEQ;AAPnB,IAhEF,CADF;AA4ED,CAtJD;;AAwJA,4BAAepC,KAAK,CAACqF,IAAN,CAAWhE,2BAAX,CAAf;AAEA,MAAM+C,YAAY,GAAGlE,UAAU,CAACoF,MAAX,CAAkB;AACrCjB,EAAAA,SAAS,EAAE;AACTkB,IAAAA,IAAI,EAAE,CADG;AAETC,IAAAA,iBAAiB,EAAE,EAFV;AAGTC,IAAAA,MAAM,EAAE;AAHC,GAD0B;AAMrCf,EAAAA,aAAa,EAAE;AACbe,IAAAA,MAAM,EAAE;AADK,GANsB;AASrCb,EAAAA,eAAe,EAAE;AACfW,IAAAA,IAAI,EAAE,CADS;AAEfG,IAAAA,UAAU,EAAE,QAFG;AAGfC,IAAAA,cAAc,EAAE,QAHD;AAIfC,IAAAA,YAAY,EAAE,EAJC;AAKfC,IAAAA,KAAK,EAAE;AALQ,GAToB;AAgBrChB,EAAAA,cAAc,EAAE;AACdU,IAAAA,IAAI,EAAE;AADQ,GAhBqB;AAmBrCT,EAAAA,sBAAsB,EAAE;AACtBgB,IAAAA,OAAO,EAAE;AADa,GAnBa;AAsBrCrB,EAAAA,aAAa,EAAE;AACbsB,IAAAA,QAAQ,EAAE,EADG;AAEbC,IAAAA,eAAe,EAAE,CAFJ;AAGbH,IAAAA,KAAK,EAAE,MAHM;AAIbI,IAAAA,SAAS,EAAE;AAJE;AAtBsB,CAAlB,CAArB;AA8BA,MAAMnC,WAAW,GAAG5D,UAAU,CAACoF,MAAX,CAAkB;AACpCf,EAAAA,QAAQ,EAAE;AACRwB,IAAAA,QAAQ,EAAE,EADF;AAERG,IAAAA,UAAU,EAAE;AAFJ;AAD0B,CAAlB,CAApB;AAOA,MAAMnC,YAAY,GAAG7D,UAAU,CAACoF,MAAX,CAAkB;AACrCf,EAAAA,QAAQ,EAAE;AACRwB,IAAAA,QAAQ,EAAE,EADF;AAERG,IAAAA,UAAU,EAAE;AAFJ;AAD2B,CAAlB,CAArB","sourcesContent":["import React from 'react';\nimport { View, StyleSheet, Text, Platform } from 'react-native';\nimport { Option1BackgroundColor, Option1BackgroundColorDark } from '../styles';\nimport i18n from '../translation';\nimport {\n  DimensionWidthType,\n  useDimensionWidthType,\n} from '../hooks/useWindowDimensions';\nimport type {\n  Feedback as OriginFeedback,\n  Question as OriginQuestion,\n  Survey,\n} from '../data';\nimport { scaleLogic } from '../utils/data';\nimport WheelPicker from './WheelPicker';\nimport SurveyFooter from '../containers/SurveyFooter';\nimport SurveyHeader from '../containers/SurveyHeader';\nimport LottieView from 'lottie-react-native';\nimport { useTheme, COLOR_SCHEMES } from '../contexts/theme';\nimport MandatoryTitle from './MandatoryTitle';\nimport { isNil } from 'ramda';\n\nconst lotties = [\n  require('../assets/animations/smiley_option1/option1_1.json'),\n  require('../assets/animations/smiley_option1/option1_2.json'),\n  require('../assets/animations/smiley_option1/option1_3.json'),\n  require('../assets/animations/smiley_option1/option1_4.json'),\n  require('../assets/animations/smiley_option1/option1_5.json'),\n];\n\ntype Feedback = OriginFeedback & {\n  answers: string[];\n};\n\ntype Question = OriginQuestion & {\n  options: string[];\n  scale: string;\n};\n\ntype Props = {\n  survey: Survey;\n  question: Question;\n  pageIndex: number;\n  forgot: boolean;\n  onClose: () => void;\n  onPrevPage: () => void;\n  onNextPage: () => void;\n  onFeedback: ({\n    questionId,\n    answers,\n    type,\n  }: {\n    questionId: string;\n    answers: number[];\n    type: string;\n  }) => void;\n  feedback: Feedback;\n};\n\nconst SmileyRatingQuestionOption2 = ({\n  survey,\n  pageIndex,\n  question,\n  forgot,\n  onClose,\n  onPrevPage,\n  onNextPage,\n  onFeedback,\n  feedback,\n}: Props) => {\n  const answered =\n    feedback &&\n    feedback.answers &&\n    !isNil(feedback.answers[0]) &&\n    typeof feedback.answers[0] === 'number';\n  const answeredValue: number = answered\n    ? parseInt(feedback.answers[0], 10)\n    : 0;\n\n  const {\n    hexCode,\n    backgroundColor: themeBackgroundColor,\n    fontColor,\n    colorScheme,\n  } = useTheme();\n  const { questionId, options, scale } = question;\n  const [selectedIndex, setSelectedIndex] = React.useState<number>(\n    answered ? answeredValue : -1\n  );\n  const hasSelected = selectedIndex > -1;\n\n  const scaleLogicList = scaleLogic[scale];\n  const lottieSelectedIndex = scaleLogicList[selectedIndex];\n\n  const setSelectedAndFeedback = React.useCallback(\n    (index) => {\n      onFeedback({\n        questionId,\n        answers: [index],\n        type: 'rating',\n      });\n    },\n    [onFeedback, questionId]\n  );\n\n  const handleSelected = (index: number) => {\n    setSelectedIndex(index);\n    setSelectedAndFeedback(index);\n  };\n\n  const descriptions = scaleLogicList.map((_, index) => options[index]);\n  const dummyDescroptions = ['Select', ...descriptions];\n\n  const dimensionWidthType = useDimensionWidthType();\n  const isPhone = dimensionWidthType === DimensionWidthType.phone;\n  const styles = isPhone ? phoneStyles : tabletStyles;\n\n  const selectedBackgroundColor =\n    colorScheme === COLOR_SCHEMES.dark\n      ? Option1BackgroundColorDark\n      : Option1BackgroundColor;\n\n  const unselectedBackgroundColor = themeBackgroundColor;\n\n  const backgroundColor = hasSelected\n    ? selectedBackgroundColor[lottieSelectedIndex]\n    : unselectedBackgroundColor;\n\n  const questionContainerStyle = [commonStyles.container, { backgroundColor }];\n\n  const hintTextStyle = [styles.hintText, { color: fontColor }];\n  const itemTextStyle = [commonStyles.itemTextStyle, { color: fontColor }];\n\n  return (\n    <>\n      <SurveyHeader\n        survey={survey}\n        pageIndex={pageIndex}\n        backgroundColor={backgroundColor}\n        onClose={onClose}\n      />\n      <View style={questionContainerStyle}>\n        {feedback && hasSelected ? (\n          <View style={commonStyles.infoContainer}>\n            <MandatoryTitle\n              question={question}\n              mandatoryErrorMessage={survey.mandatoryErrorMessage}\n              forgot={forgot}\n            />\n            <View style={commonStyles.centerContainer}>\n              <LottieView\n                source={lotties[lottieSelectedIndex]}\n                autoPlay\n                speed={0.5}\n              />\n            </View>\n            <View style={commonStyles.wheelContainer}>\n              <WheelPicker\n                selectedIndex={selectedIndex}\n                options={descriptions}\n                onChange={(index) => {\n                  if (index > -1) handleSelected(index);\n                }}\n                itemTextStyle={itemTextStyle}\n                selectedIndicatorStyle={commonStyles.selectedIndicatorStyle}\n                key={'WheelPicker-descriptions'}\n                itemHeight={Platform.OS === 'android' ? 60 : undefined}\n              />\n            </View>\n          </View>\n        ) : (\n          <View style={commonStyles.infoContainer}>\n            <MandatoryTitle\n              question={question}\n              mandatoryErrorMessage={survey.mandatoryErrorMessage}\n              forgot={forgot}\n            />\n            <View style={commonStyles.centerContainer}>\n              <Text style={hintTextStyle}>\n                {i18n.t('option1HintDescription:title')}\n              </Text>\n            </View>\n            <View style={commonStyles.wheelContainer}>\n              <WheelPicker\n                selectedIndex={0}\n                options={dummyDescroptions}\n                onChange={(index) => {\n                  handleSelected(index - 1);\n                }}\n                itemTextStyle={itemTextStyle}\n                selectedIndicatorStyle={commonStyles.selectedIndicatorStyle}\n                key={'WheelPicker-dummyDescroptions'}\n                itemHeight={Platform.OS === 'android' ? 60 : undefined}\n              />\n            </View>\n          </View>\n        )}\n      </View>\n      <SurveyFooter\n        submitSurvey={survey.submitSurvey}\n        surveyColor={hexCode}\n        isFirstPage={pageIndex === 0}\n        isLastPage={pageIndex === survey.pageOrder.length - 1}\n        onPrevPage={onPrevPage}\n        onNextPage={onNextPage}\n        backgroundColor={backgroundColor}\n      />\n    </>\n  );\n};\n\nexport default React.memo(SmileyRatingQuestionOption2);\n\nconst commonStyles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 32,\n    height: '100%',\n  },\n  infoContainer: {\n    height: '100%',\n  },\n  centerContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: 12,\n    width: '100%',\n  },\n  wheelContainer: {\n    flex: 1,\n  },\n  selectedIndicatorStyle: {\n    opacity: 0,\n  },\n  itemTextStyle: {\n    fontSize: 24,\n    paddingVertical: 9,\n    width: '100%',\n    textAlign: 'center',\n  },\n});\n\nconst phoneStyles = StyleSheet.create({\n  hintText: {\n    fontSize: 16,\n    fontWeight: '500',\n  },\n});\n\nconst tabletStyles = StyleSheet.create({\n  hintText: {\n    fontSize: 16,\n    fontWeight: '500',\n  },\n});\n"]}