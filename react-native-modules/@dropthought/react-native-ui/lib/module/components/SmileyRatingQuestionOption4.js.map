{"version":3,"sources":["SmileyRatingQuestionOption4.tsx"],"names":["React","useEffect","View","StyleSheet","Text","TouchableWithoutFeedback","Animated","TouchableOpacity","Dimensions","Image","Platform","Colors","i18n","DimensionWidthType","useDimensionWidthType","LottieView","SurveyFooter","SurveyHeader","useTheme","COLOR_SCHEMES","MandatoryTitle","scaleLogic","option4FaceTable","faceTable","option4LoopFaceTable","loopFaceTable","option4TransformTable","transformTable","isNil","SmileyRatingQuestionOption4","survey","pageIndex","question","forgot","onClose","onPrevPage","onNextPage","onFeedback","feedback","answered","answers","answeredValue","parseInt","windowHeight","get","height","questionId","scale","options","selectedIndex","setSelectedIndex","useState","score","setScore","isLoop","setIsLoop","loopLotties","setLoopLotties","transformLotties","setTransformLotties","scoreContainerOpacity","useRef","Value","current","scoreOpacity","descriptionYAxis","lottieRef","totalScore","Number","renderScore","hasEdited","scaleLogicList","loopList","map","value","index","scaleKey","String","transformList","array","fromScale","toScale","key","imageLignt","require","imageDark","updateScore","useCallback","number","isAtCoverScreen","newScore","setTimeout","play","setValue","sequence","timing","toValue","duration","useNativeDriver","start","type","backgroundColor","fontColor","colorScheme","dimensionWidthType","isPhone","phone","styles","phoneStyles","tabletStyles","containerStyle","commonStyles","container","scoreSelectedStyle","scoreSelected","opacity","color","descStyle","desc","transform","translateY","slashStyle","slash","marginBottom","OS","scoreTotalStyle","scoreTotal","hintContainerStyle","hintContainer","hintTextStyle","hintText","hintSubTextStyle","hintSubText","handleDecreaseScore","lottieContainer","isCancel","infoImage","dark","scoreContainer","scoreText","contentContainer","t","count","surveyProperty","hexCode","pageOrder","length","create","flex","paddingHorizontal","flexDirection","alignItems","white","paddingBottom","width","justifyContent","fontSize","fontWeight","textAlign","marginVertical","smileyRatingScoreGray"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  View,\n  StyleSheet,\n  Text,\n  TouchableWithoutFeedback,\n  Animated,\n  TouchableOpacity,\n  Dimensions,\n  Image,\n  Platform,\n} from 'react-native';\nimport { Colors } from '../styles';\nimport i18n from '../translation';\nimport {\n  DimensionWidthType,\n  useDimensionWidthType,\n} from '../hooks/useWindowDimensions';\nimport type {\n  Feedback as OriginFeedback,\n  Question as OriginQuestion,\n  Survey,\n} from '../data';\nimport LottieView from 'lottie-react-native';\nimport SurveyFooter from '../containers/SurveyFooter';\nimport SurveyHeader from '../containers/SurveyHeader';\nimport { useTheme, COLOR_SCHEMES } from '../contexts/theme';\nimport MandatoryTitle from './MandatoryTitle';\nimport {\n  scaleLogic,\n  option4FaceTable as faceTable,\n  option4LoopFaceTable as loopFaceTable,\n  option4TransformTable as transformTable,\n} from '../utils/data';\nimport { isNil } from 'ramda';\n\ntype Feedback = OriginFeedback & {\n  answers: string[];\n};\n\ntype Question = OriginQuestion & {\n  options: string[];\n  scale: string;\n};\n\ntype Props = {\n  survey: Survey;\n  pageIndex: number;\n  question: Question;\n  forgot: boolean;\n  onClose: () => void;\n  onPrevPage: () => void;\n  onNextPage: () => void;\n  onFeedback: ({\n    questionId,\n    answers,\n    type,\n  }: {\n    questionId: string;\n    answers: number[];\n    type: string;\n  }) => void;\n  feedback: Feedback;\n};\n\nconst SmileyRatingQuestionOption4 = ({\n  survey,\n  pageIndex,\n  question,\n  forgot,\n  onClose,\n  onPrevPage,\n  onNextPage,\n  onFeedback,\n  feedback,\n}: Props) => {\n  const answered =\n    feedback &&\n    feedback.answers &&\n    !isNil(feedback.answers[0]) &&\n    typeof feedback.answers[0] === 'number';\n  const answeredValue: number = answered\n    ? parseInt(feedback.answers[0], 10)\n    : 0;\n\n  const windowHeight = Dimensions.get('window').height;\n  const { questionId, scale, options } = question;\n  const [selectedIndex, setSelectedIndex] = React.useState<number>(\n    answered ? answeredValue : 0\n  );\n  const [score, setScore] = React.useState<number>(\n    answered ? answeredValue : -1\n  );\n  const [isLoop, setIsLoop] = React.useState<boolean>(true);\n  const [loopLotties, setLoopLotties] = React.useState<string[]>([]);\n  const [transformLotties, setTransformLotties] = React.useState<string[]>([]);\n  const scoreContainerOpacity = React.useRef(\n    new Animated.Value(answered ? 1 : 0)\n  ).current;\n  const scoreOpacity = React.useRef(\n    new Animated.Value(answered ? 1 : 0)\n  ).current;\n  const descriptionYAxis = React.useRef(\n    new Animated.Value(answered ? 1 : windowHeight / 2 - 246 + 37)\n  ).current;\n  // 37 -> one text line height\n  // 246 -> Padding Vertical 123\n\n  const lottieRef = React.useRef<LottieView>();\n\n  const totalScore = Number(scale);\n  const renderScore = score + 1;\n  const hasEdited = score >= 0;\n\n  // choose which scale logic we want to use.\n  const scaleLogicList = scaleLogic[scale];\n\n  useEffect(() => {\n    const loopList = scaleLogicList.map((value, index) => {\n      const scaleKey = String(index + 1) + faceTable[value];\n      return loopFaceTable.get(scaleKey);\n    });\n\n    const transformList = scaleLogicList.map((value, index, array) => {\n      if (index === 0) return '';\n      const fromScale = String(index) + faceTable[array[index - 1]];\n      const toScale = String(index + 1) + faceTable[value];\n      const key = `${fromScale}-${toScale}`;\n      return transformTable.get(key);\n    });\n\n    setLoopLotties(loopList);\n    setTransformLotties(transformList);\n  }, [scaleLogicList]);\n\n  const imageLignt = require('../assets/icOption4Info.png');\n  const imageDark = require('../assets/icOption4InfoDark.png');\n\n  const updateScore = React.useCallback(\n    (number) => {\n      const isAtCoverScreen = score === -1;\n      const newScore = score + number;\n\n      setScore(newScore);\n\n      if (!isAtCoverScreen) {\n        setSelectedIndex(newScore);\n        if (number > 0) {\n          setIsLoop(false);\n        } else {\n          setIsLoop(true);\n          setTimeout(() => {\n            lottieRef.current?.play();\n          }, 100);\n        }\n      }\n\n      //animtaion--\n      scoreOpacity.setValue(0);\n      if (isAtCoverScreen) {\n        Animated.sequence([\n          Animated.timing(descriptionYAxis, {\n            toValue: 0,\n            duration: 500,\n            useNativeDriver: true,\n          }),\n          Animated.timing(scoreContainerOpacity, {\n            toValue: 1,\n            duration: 500,\n            useNativeDriver: true,\n          }),\n          Animated.timing(scoreOpacity, {\n            toValue: 1,\n            duration: 500,\n            useNativeDriver: true,\n          }),\n        ]).start();\n      } else {\n        Animated.timing(scoreOpacity, {\n          toValue: 1,\n          duration: 500,\n          useNativeDriver: true,\n        }).start();\n      }\n      //animtaion--\n\n      onFeedback({\n        questionId,\n        answers: [newScore],\n        type: 'rating',\n      });\n    },\n    [\n      score,\n      scoreOpacity,\n      onFeedback,\n      questionId,\n      descriptionYAxis,\n      scoreContainerOpacity,\n    ]\n  );\n  const { backgroundColor, fontColor, colorScheme } = useTheme();\n\n  const dimensionWidthType = useDimensionWidthType();\n  const isPhone = dimensionWidthType === DimensionWidthType.phone;\n  const styles = isPhone ? phoneStyles : tabletStyles;\n\n  const containerStyle = [commonStyles.container, { backgroundColor }];\n\n  const scoreSelectedStyle = [\n    styles.scoreSelected,\n    { opacity: scoreOpacity, color: fontColor },\n  ];\n\n  const descStyle = [\n    styles.desc,\n    {\n      transform: [{ translateY: descriptionYAxis }],\n      opacity: scoreContainerOpacity,\n      color: fontColor,\n    },\n  ];\n\n  const slashStyle = [\n    styles.slash,\n    {\n      opacity: scoreContainerOpacity,\n      marginBottom: Platform.OS === 'ios' ? 14 : 7,\n    },\n  ];\n\n  const scoreTotalStyle = [\n    styles.scoreTotal,\n    {\n      opacity: scoreContainerOpacity,\n      marginBottom: Platform.OS === 'ios' ? 5 : 4,\n    },\n  ];\n\n  const hintContainerStyle = hasEdited ? null : commonStyles.hintContainer;\n\n  const hintTextStyle = [commonStyles.hintText, { color: fontColor }];\n\n  const hintSubTextStyle = [commonStyles.hintSubText, { color: fontColor }];\n\n  useEffect(() => {\n    if (isLoop) {\n      setTimeout(() => {\n        lottieRef.current?.play();\n      }, 100);\n    }\n  }, [isLoop]);\n\n  const handleDecreaseScore = () => {\n    if (score > 0) updateScore(-1);\n  };\n\n  const lottieContainer = isLoop ? (\n    <View style={commonStyles.lottieContainer}>\n      <TouchableWithoutFeedback onPress={handleDecreaseScore}>\n        <LottieView\n          // @ts-ignore\n          ref={lottieRef}\n          source={loopLotties[selectedIndex]}\n          autoPlay\n          loop\n        />\n      </TouchableWithoutFeedback>\n    </View>\n  ) : (\n    <View style={commonStyles.lottieContainer}>\n      <TouchableWithoutFeedback onPress={handleDecreaseScore}>\n        <LottieView\n          source={transformLotties[selectedIndex]}\n          autoPlay\n          loop={false}\n          onAnimationFinish={(isCancel) => {\n            if (!isCancel) setIsLoop(true);\n          }}\n        />\n      </TouchableWithoutFeedback>\n    </View>\n  );\n\n  const infoImage = (\n    <Image\n      style={commonStyles.infoImage}\n      source={colorScheme === COLOR_SCHEMES.dark ? imageDark : imageLignt}\n    />\n  );\n\n  const scoreContainer = (\n    <TouchableWithoutFeedback\n      onPress={() => {\n        if (renderScore < totalScore) updateScore(1);\n      }}\n    >\n      <View style={commonStyles.scoreContainer}>\n        <View style={commonStyles.scoreText}>\n          <Animated.Text style={scoreSelectedStyle}>\n            {renderScore}\n          </Animated.Text>\n          <Animated.Text style={slashStyle}>{'/'}</Animated.Text>\n          <Animated.Text style={scoreTotalStyle}>{totalScore}</Animated.Text>\n        </View>\n        <Animated.Text style={descStyle}>\n          {options[selectedIndex]}\n        </Animated.Text>\n      </View>\n    </TouchableWithoutFeedback>\n  );\n\n  return (\n    <>\n      <SurveyHeader\n        survey={survey}\n        pageIndex={pageIndex}\n        backgroundColor={backgroundColor}\n        onClose={onClose}\n      />\n      <View style={containerStyle}>\n        <MandatoryTitle question={question} forgot={forgot} />\n        <View style={commonStyles.contentContainer}>\n          {hasEdited ? (\n            <>\n              {lottieContainer}\n              {scoreContainer}\n            </>\n          ) : null}\n          <TouchableOpacity\n            style={hintContainerStyle}\n            disabled={score > -1}\n            onPress={() => updateScore(1)}\n          >\n            <>\n              {hasEdited ? null : infoImage}\n              <Text style={hintTextStyle}>\n                {i18n.t('option4HintDescription:title')}\n              </Text>\n              <Text style={hintSubTextStyle}>\n                {i18n.t('option4HintDescription:subTitle', {\n                  count: totalScore,\n                })}\n              </Text>\n            </>\n          </TouchableOpacity>\n        </View>\n      </View>\n      <SurveyFooter\n        surveyColor={survey.surveyProperty.hexCode}\n        isFirstPage={pageIndex === 0}\n        isLastPage={pageIndex === survey.pageOrder.length - 1}\n        onPrevPage={onPrevPage}\n        onNextPage={onNextPage}\n        backgroundColor={backgroundColor}\n      />\n    </>\n  );\n};\n\nexport default SmileyRatingQuestionOption4;\n\nconst commonStyles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 42,\n    flexDirection: 'column',\n    alignItems: 'center',\n    backgroundColor: Colors.white,\n    paddingBottom: 7,\n  },\n  contentContainer: {\n    width: '100%',\n    flex: 5,\n    alignItems: 'center',\n  },\n  infoImage: {\n    marginBottom: 30,\n  },\n  hintContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hintText: {\n    fontSize: 16,\n    fontWeight: '500',\n    textAlign: 'center',\n    marginBottom: 6,\n  },\n  hintSubText: {\n    fontSize: 12,\n    fontWeight: '400',\n    textAlign: 'center',\n  },\n  lottieContainer: {\n    height: 60,\n    width: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  scoreContainer: {\n    flex: 1,\n    width: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginVertical: 10,\n  },\n  scoreText: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n  },\n});\n\nconst phoneStyles = StyleSheet.create({\n  desc: {\n    fontSize: 20,\n    fontWeight: '600',\n    textAlign: 'center',\n  },\n  scoreSelected: {\n    fontSize: 74,\n    textAlign: 'center',\n    alignItems: 'baseline',\n  },\n  scoreTotal: {\n    fontSize: 55,\n    color: Colors.smileyRatingScoreGray,\n  },\n  slash: {\n    fontSize: 55,\n    color: Colors.smileyRatingScoreGray,\n  },\n});\n\nconst tabletStyles = StyleSheet.create({\n  desc: {\n    fontSize: 20,\n    fontWeight: '600',\n    textAlign: 'center',\n  },\n  scoreSelected: {\n    fontSize: 74,\n    textAlign: 'center',\n    alignItems: 'baseline',\n  },\n  scoreTotal: {\n    fontSize: 55,\n    color: Colors.smileyRatingScoreGray,\n  },\n  slash: {\n    fontSize: 37,\n    color: Colors.smileyRatingScoreGray,\n  },\n});\n"]}