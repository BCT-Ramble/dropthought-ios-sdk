{"version":3,"sources":["RankingQuestion.tsx"],"names":["React","useEffect","useRef","useState","StyleSheet","Platform","ScrollView","View","Image","TouchableOpacity","Text","Modal","FlatList","ActionSheetIOS","DimensionWidthType","useDimensionWidthType","MandatoryTitle","GlobalStyle","Colors","addOpacityToColor","DraggableFlatList","useTheme","COLOR_SCHEMES","swapElements","array","index1","index2","newArray","splice","RankingQuestion","question","onFeedback","forgot","feedback","themeColor","fontColor","colorScheme","isDarkMode","dark","dimensionWidthType","isIPhone","OS","phone","questionId","options","allowNAForRanking","originListRef","map","option","index","isNA","list","setList","current","visible","setVisible","selectedOption","setSelectedOption","listForRankingQuestion","length","feedbackToOptions","feedbackToNAOptions","forEach","newOption","answers","result","type","onNAPress","item","prev","withoutItem","filter","normalList","naList","renderItem","drag","dragIconStyle","tintColor","undefined","opacity","hitSlop","top","bottom","left","right","checkBoxStyle","naComponent","styles","divider","row","require","unCheckBox","borderColor","rankingCheckBoxBorder","naText","color","rankText","renderItemStyle","backgroundColor","rankingBGDark","rankingBorderDark","rankingContainerStyle","rankingContainerBgDark","rankingContainerBorderDark","rankTitle","rankingContainer","oniOSModal","selectedItem","actionSheetOptions","_","toString","showActionSheetWithOptions","title","white","black","cancelButtonIndex","userInterfaceStyle","buttonIndex","currentIndex","findIndex","newList","rankingModal","modalBG","modalDismissArea","modalContainer","modalTitle","_value","modalDivider","container","mandatoryTitle","scrollViewContainer","questionContainer","data","memo","create","flex","paddingHorizontal","fontSize","fontWeight","lineHeight","textAlign","marginBottom","minHeight","marginVertical","borderWidth","borderRadius","rankingBorder","rankingBG","paddingVertical","marginHorizontal","width","height","borderStyle","rankingContainerBorder","justifyContent","marginLeft","margin","shadowColor","shadowOffset","shadowRadius","shadowOpacity","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n  StyleSheet,\n  Platform,\n  ScrollView,\n  View,\n  Image,\n  TouchableOpacity,\n  Text,\n  Modal,\n  FlatList,\n  ActionSheetIOS,\n} from 'react-native';\nimport {\n  DimensionWidthType,\n  useDimensionWidthType,\n} from '../hooks/useWindowDimensions';\nimport MandatoryTitle from './MandatoryTitle';\nimport GlobalStyle, { Colors, addOpacityToColor } from '../styles';\nimport type {\n  Feedback as OriginFeedback,\n  Question as OriginQuestion,\n} from '../data';\nimport DraggableFlatList from 'react-native-draggable-flatlist';\nimport { useTheme, COLOR_SCHEMES } from '../contexts/theme';\n\ntype TransformedOption = {\n  option: string;\n  index: number;\n  isNA: boolean;\n};\n\ntype RenderItemParams = {\n  item: TransformedOption;\n  index?: number;\n  drag: () => void;\n  isActive: boolean;\n};\n\ninterface SwapElements {\n  (\n    array: TransformedOption[],\n    index1: number,\n    index2: number\n  ): TransformedOption[];\n}\n\ntype Feedback = OriginFeedback & {\n  listForRankingQuestion: TransformedOption[];\n};\n\ntype Question = OriginQuestion & {\n  options: string[];\n  scale: string;\n  allowNAForRanking: boolean;\n};\n\nconst swapElements: SwapElements = (array, index1, index2) => {\n  let newArray = [...array];\n  newArray[index1] = newArray.splice(index2, 1, newArray[index1])[0];\n  return newArray;\n};\n\ntype Props = {\n  question: Question;\n  onFeedback: (feedback: Feedback) => void;\n  forgot: boolean;\n  feedback: Feedback;\n  themeColor: string;\n};\n\nconst RankingQuestion = ({\n  question,\n  onFeedback,\n  forgot,\n  feedback,\n  themeColor,\n}: Props) => {\n  const { fontColor, colorScheme } = useTheme();\n  const isDarkMode = colorScheme === COLOR_SCHEMES.dark;\n\n  const dimensionWidthType = useDimensionWidthType();\n  const isIPhone =\n    Platform.OS === 'ios' && dimensionWidthType === DimensionWidthType.phone;\n\n  const { questionId, options = [], allowNAForRanking = true } = question;\n\n  const originListRef = useRef<TransformedOption[]>(\n    options.map((option, index) => {\n      return { option, index, isNA: false };\n    })\n  );\n\n  const [list, setList] = useState(originListRef.current);\n  const [visible, setVisible] = useState(false);\n  const [selectedOption, setSelectedOption] = useState<TransformedOption>();\n\n  useEffect(() => {\n    const { listForRankingQuestion } = feedback ?? {};\n    if (\n      feedback &&\n      listForRankingQuestion &&\n      listForRankingQuestion.length > 0\n    ) {\n      let feedbackToOptions: TransformedOption[] = [];\n      let feedbackToNAOptions: TransformedOption[] = [];\n      listForRankingQuestion.forEach(({ option, isNA }, index) => {\n        const newOption = { option, index, isNA };\n        if (isNA) {\n          feedbackToNAOptions = [...feedbackToNAOptions, newOption];\n        } else {\n          feedbackToOptions = [...feedbackToOptions, newOption];\n        }\n      });\n      setList(listForRankingQuestion);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const answers: (number | string)[] = list.map(({ isNA, index }) => {\n      return isNA ? 'N/A' : index;\n    });\n    const result = {\n      questionId,\n      answers,\n      type: 'ranking',\n      listForRankingQuestion: list, // for render usage after page navigations\n    };\n    // @ts-ignore\n    onFeedback(result);\n  }, [list, onFeedback, questionId]);\n\n  const onNAPress = (item: TransformedOption) => {\n    if (list) {\n      item.isNA = !item.isNA;\n      setList((prev) => {\n        const withoutItem = prev.filter(({ option }) => option !== item.option);\n        const normalList = withoutItem.filter((current) => !current.isNA);\n        const naList = withoutItem.filter((current) => current.isNA);\n        return item.isNA\n          ? [...normalList, ...naList, item]\n          : [...normalList, item, ...naList];\n      });\n    }\n  };\n\n  const renderItem = ({ item, index = 0, drag }: RenderItemParams) => {\n    const { option, isNA } = item;\n    const dragIconStyle = {\n      tintColor: isDarkMode ? undefined : themeColor,\n      opacity: isNA ? 0.3 : 1,\n    };\n\n    const hitSlop = { top: 12, bottom: 12, left: 5, right: 5 };\n    const checkBoxStyle = { tintColor: themeColor };\n    const naComponent = allowNAForRanking ? (\n      <>\n        <View style={styles.divider} />\n        <TouchableOpacity\n          style={GlobalStyle.row}\n          hitSlop={hitSlop}\n          onPress={() => onNAPress(item)}\n        >\n          {isNA ? (\n            <Image\n              style={checkBoxStyle}\n              source={require('../assets/icCheckBoxRounded.png')}\n            />\n          ) : (\n            <View\n              style={[\n                styles.unCheckBox,\n                {\n                  borderColor: isDarkMode\n                    ? Colors.rankingCheckBoxBorder\n                    : themeColor ?? Colors.rankingCheckBoxBorder,\n                },\n              ]}\n            />\n          )}\n          <Text style={[styles.naText, { color: fontColor }]}>{'N/A'}</Text>\n        </TouchableOpacity>\n      </>\n    ) : null;\n\n    const rankText = isNA ? 'NA' : `${index + 1}`;\n    const renderItemStyle = isDarkMode\n      ? {\n          backgroundColor: Colors.rankingBGDark,\n          borderColor: Colors.rankingBorderDark,\n        }\n      : {\n          backgroundColor: themeColor\n            ? addOpacityToColor(themeColor, 0.05)\n            : Colors.rankingBGDark,\n          borderColor: themeColor\n            ? addOpacityToColor(themeColor, 0.1)\n            : Colors.rankingBorderDark,\n        };\n    const rankingContainerStyle = isDarkMode\n      ? {\n          backgroundColor: Colors.rankingContainerBgDark,\n          borderColor: Colors.rankingContainerBorderDark,\n        }\n      : {\n          borderColor: themeColor\n            ? addOpacityToColor(themeColor, 0.3)\n            : Colors.rankingBorderDark,\n        };\n    return (\n      <TouchableOpacity\n        style={[styles.renderItem, renderItemStyle]}\n        disabled={isNA}\n        delayLongPress={200}\n        onLongPress={drag}\n      >\n        <Image style={dragIconStyle} source={require('../assets/icDrag.png')} />\n        <Text\n          style={[styles.rankTitle, { color: fontColor }]}\n          numberOfLines={2}\n        >\n          {option}\n        </Text>\n        <TouchableOpacity\n          style={[styles.rankingContainer, rankingContainerStyle]}\n          hitSlop={hitSlop}\n          disabled={isNA}\n          onPress={() => {\n            setSelectedOption(item);\n            isIPhone ? oniOSModal(item) : setVisible(true);\n          }}\n        >\n          <Text style={[styles.rankText, { color: fontColor }]}>\n            {rankText}\n          </Text>\n          <Image source={require('../assets/ic-expand-more-24-px.png')} />\n        </TouchableOpacity>\n        {naComponent}\n      </TouchableOpacity>\n    );\n  };\n  const normalList = list.filter((current) => !current.isNA);\n  const naList = list.filter((current) => current.isNA);\n\n  const oniOSModal = (selectedItem: TransformedOption) => {\n    const actionSheetOptions = [\n      'Cancel',\n      ...normalList.map((_, index) => (index + 1).toString()),\n      'N/A',\n    ];\n    ActionSheetIOS.showActionSheetWithOptions(\n      {\n        title: 'Select your rating',\n        options: actionSheetOptions,\n        tintColor: isDarkMode ? Colors.white : Colors.black,\n        cancelButtonIndex: 0,\n        // @ts-ignore\n        userInterfaceStyle: colorScheme,\n      },\n      (buttonIndex) => {\n        if (buttonIndex === 0) {\n          return;\n        } else if (buttonIndex === actionSheetOptions.length - 1) {\n          onNAPress(selectedItem);\n        } else {\n          setList((prev) => {\n            // swap\n            const currentIndex = prev.findIndex(\n              ({ option }) => option === selectedItem.option\n            );\n            const index = buttonIndex - 1;\n            const newList = swapElements(prev, index, currentIndex);\n            return newList;\n          });\n        }\n      }\n    );\n  };\n\n  const rankingModal = (\n    <Modal transparent animationType=\"fade\" visible={visible}>\n      <View style={styles.modalBG}>\n        <TouchableOpacity\n          style={styles.modalDismissArea}\n          onPress={() => setVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <Text style={styles.modalTitle}>{'Select your rating'}</Text>\n            {normalList.map((_value, index) => {\n              return (\n                <View key={index}>\n                  <View style={styles.modalDivider} />\n                  <TouchableOpacity\n                    onPress={() => {\n                      if (selectedOption) {\n                        setList((prev) => {\n                          // swap\n                          const currentIndex = prev.findIndex(\n                            ({ option }) => option === selectedOption.option\n                          );\n                          const newList = swapElements(\n                            prev,\n                            index,\n                            currentIndex\n                          );\n                          return newList;\n                        });\n                        setVisible(false);\n                      }\n                    }}\n                  >\n                    <Text style={styles.modalTitle}>{`${index + 1}`}</Text>\n                  </TouchableOpacity>\n                </View>\n              );\n            })}\n            {allowNAForRanking ? (\n              <TouchableOpacity\n                onPress={() => {\n                  if (selectedOption) {\n                    onNAPress(selectedOption);\n                  }\n                  setVisible(false);\n                }}\n              >\n                <View style={styles.modalDivider} />\n                <Text style={styles.modalTitle}>{'N/A'}</Text>\n              </TouchableOpacity>\n            ) : null}\n          </View>\n        </TouchableOpacity>\n      </View>\n    </Modal>\n  );\n\n  return (\n    <>\n      <ScrollView style={styles.container}>\n        <MandatoryTitle\n          style={styles.mandatoryTitle}\n          forgot={forgot}\n          question={question}\n        />\n        <ScrollView\n          horizontal={true}\n          scrollEnabled={false}\n          contentContainerStyle={styles.scrollViewContainer}\n        >\n          {/* keep above ScrollView to prevent error => \"VirtualizedLists \n              should never be nested inside plain ScrollViews with the same \n              orientation because it can break windowing and other functionality\n              - use another VirtualizedList-backed container instead\" */}\n          <View style={styles.questionContainer}>\n            {/* Do not add the margin or padding in to the DraggableFlatList, \n                it could may list item component get wrong location */}\n            <DraggableFlatList\n              scrollEnabled={false}\n              data={normalList}\n              onDragEnd={({ data }) => setList([...data, ...naList])}\n              // @ts-ignore\n              renderItem={renderItem}\n              keyExtractor={(item) => item.index.toString()}\n            />\n            <FlatList\n              scrollEnabled={false}\n              data={naList}\n              // @ts-ignore\n              renderItem={renderItem}\n              keyExtractor={(_, index) => index.toString()}\n            />\n          </View>\n        </ScrollView>\n      </ScrollView>\n      {rankingModal}\n    </>\n  );\n};\n\nexport default React.memo(RankingQuestion);\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 43,\n  },\n  title: {\n    fontSize: 26,\n    fontWeight: '600',\n    lineHeight: 32,\n    textAlign: 'center',\n    marginBottom: 54,\n  },\n  renderItem: {\n    ...GlobalStyle.row,\n    minHeight: 48,\n    marginVertical: 4,\n    borderWidth: 1,\n    borderRadius: 12,\n    borderColor: Colors.rankingBorder,\n    paddingHorizontal: 12,\n    backgroundColor: Colors.rankingBG,\n    paddingVertical: 15,\n  },\n  rankTitle: {\n    flex: 1,\n    marginHorizontal: 12,\n    fontSize: 15,\n  },\n  rankingContainer: {\n    ...GlobalStyle.row,\n    width: 53,\n    height: 24,\n    borderRadius: 4,\n    backgroundColor: Colors.white,\n    borderStyle: 'solid',\n    borderWidth: 1,\n    borderColor: Colors.rankingContainerBorder,\n    paddingHorizontal: 7,\n    justifyContent: 'space-between',\n  },\n  rankText: {\n    fontSize: 15,\n  },\n  divider: {\n    height: 24,\n    width: 1,\n    backgroundColor: Colors.rankingBorder,\n    marginHorizontal: 16,\n  },\n  naText: {\n    fontSize: 13,\n    marginLeft: 8,\n  },\n  unCheckBox: {\n    width: 18,\n    height: 18,\n    borderStyle: 'solid',\n    borderWidth: 1,\n    borderColor: '#a8a8a8',\n    borderRadius: 4,\n    margin: 3,\n  },\n  modalBG: {\n    ...GlobalStyle.row,\n    justifyContent: 'center',\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.24)',\n  },\n  modalContainer: {\n    width: 268,\n    backgroundColor: Colors.white,\n    borderRadius: 14,\n    shadowColor: 'rgba(0, 0, 0, 0.16)',\n    shadowOffset: {\n      width: 0,\n      height: 12,\n    },\n    shadowRadius: 16,\n    shadowOpacity: 1,\n  },\n  modalTitle: {\n    height: 24,\n    marginVertical: 10,\n    textAlign: 'center',\n    fontSize: 17,\n    fontWeight: '500',\n    color: Colors.white,\n  },\n  modalDivider: {\n    backgroundColor: Colors.divider,\n    height: 1,\n  },\n  scrollViewContainer: {\n    width: '100%',\n    justifyContent: 'center',\n  },\n  mandatoryTitle: {\n    marginHorizontal: -23,\n  },\n  questionContainer: {\n    width: '100%',\n    height: '100%',\n  },\n  modalDismissArea: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n"]}