{"version":3,"sources":["useOpenEnded.ts"],"names":["useState","useEffect","Keyboard","QuestionMetaDataType","useOpenEnded","feedback","index","feedbackText","answers","toString","text","setText","isFocus","setIsFocus","hasEdited","setHasEdited","length","keyboardDidHideListener","addListener","onEndEditingHandler","remove","onChangeTextHandler","textInput","metadataTypeKeyboard","metadataType","Email","Phone","Number","Date","metadataTypeAutoCapitalize","Name","onFocus","onBlur"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,QAAT,QAA8C,cAA9C;AACA,SAASC,oBAAT,QAAqC,eAArC;;AAMA,MAAMC,YAAY,GAAG,CAACC,QAAD,EAAqBC,KAAa,GAAG,CAArC,KAA2C;AAAA;;AAC9D;AACA,QAAMC,YAAY,GAAGF,QAAQ,wBAAGA,QAAQ,CAACG,OAAZ,sDAAG,kBAAmBF,KAAnB,EAA0BG,QAA1B,EAAH,GAA0C,EAAvE;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAACO,YAAD,CAAhC;AACA,QAAM,CAACK,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAACO,YAAY,CAACS,MAAb,GAAsB,CAAvB,CAA1C;AAEAf,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,uBAAuB,GAAGf,QAAQ,CAACgB,WAAT,CAC9B,iBAD8B,EAE9BC,mBAF8B,CAAhC;AAIA,WAAO,MAAM;AACXF,MAAAA,uBAAuB,CAACG,MAAxB;AACD,KAFD;AAGD,GARQ,EAQN,EARM,CAAT;;AAUA,QAAMD,mBAAmB,GAAG,MAAM;AAChCJ,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,GAFD;;AAIA,QAAMM,mBAAmB,GAAIC,SAAD,IAAuB;AACjD,QAAIV,OAAJ,EAAa;AACXD,MAAAA,OAAO,CAACW,SAAD,CAAP;AACD;AACF,GAJD;;AAMA,QAAMC,oBAAoB,GACxBC,YAD2B,IAES;AACpC,YAAQA,YAAR;AACE,WAAKrB,oBAAoB,CAACsB,KAA1B;AACE,eAAO,SAAP;;AACF,WAAKtB,oBAAoB,CAACuB,KAA1B;AACE,eAAO,WAAP;;AACF,WAAKvB,oBAAoB,CAACwB,MAA1B;AACE,eAAO,SAAP;;AACF,WAAKxB,oBAAoB,CAACyB,IAA1B;AACA;AACE,eAAO,SAAP;AATJ;AAWD,GAdD;;AAgBA,QAAMC,0BAA0B,GAC9BL,YADiC,IAE9B;AACH,YAAQA,YAAR;AACE,WAAKrB,oBAAoB,CAAC2B,IAA1B;AACE,eAAO,OAAP;;AACF,WAAK3B,oBAAoB,CAACsB,KAA1B;AACA,WAAKtB,oBAAoB,CAACuB,KAA1B;AACA,WAAKvB,oBAAoB,CAACyB,IAA1B;AACA,WAAKzB,oBAAoB,CAACwB,MAA1B;AACE,eAAO,MAAP;;AACF;AACE,eAAO,WAAP;AATJ;AAWD,GAdD;;AAeA,SAAO;AACLJ,IAAAA,oBADK;AAELM,IAAAA,0BAFK;AAILnB,IAAAA,IAJK;AAKLE,IAAAA,OALK;AAMLE,IAAAA,SANK;AAQLO,IAAAA,mBARK;AASLF,IAAAA,mBATK;AAULY,IAAAA,OAAO,EAAE,MAAMlB,UAAU,CAAC,IAAD,CAVpB;AAWLmB,IAAAA,MAAM,EAAE,MAAMnB,UAAU,CAAC,KAAD;AAXnB,GAAP;AAaD,CAvED;;AAyEA,eAAeT,YAAf","sourcesContent":["import { useState, useEffect } from 'react';\nimport { Keyboard, KeyboardTypeOptions } from 'react-native';\nimport { QuestionMetaDataType } from '../utils/data';\nimport type {\n  Feedback,\n  QuestionMetaDataType as TypeQuestionMetaDataType,\n} from '../data';\n\nconst useOpenEnded = (feedback: Feedback, index: number = 0) => {\n  //@ts-ignore\n  const feedbackText = feedback ? feedback.answers?.[index].toString() : '';\n  const [text, setText] = useState(feedbackText);\n  const [isFocus, setIsFocus] = useState(false);\n  const [hasEdited, setHasEdited] = useState(feedbackText.length > 0);\n\n  useEffect(() => {\n    const keyboardDidHideListener = Keyboard.addListener(\n      'keyboardDidHide',\n      onEndEditingHandler\n    );\n    return () => {\n      keyboardDidHideListener.remove();\n    };\n  }, []);\n\n  const onEndEditingHandler = () => {\n    setHasEdited(true);\n  };\n\n  const onChangeTextHandler = (textInput: string) => {\n    if (isFocus) {\n      setText(textInput);\n    }\n  };\n\n  const metadataTypeKeyboard = (\n    metadataType: TypeQuestionMetaDataType | undefined\n  ): KeyboardTypeOptions | undefined => {\n    switch (metadataType) {\n      case QuestionMetaDataType.Email:\n        return 'default';\n      case QuestionMetaDataType.Phone:\n        return 'phone-pad';\n      case QuestionMetaDataType.Number:\n        return 'numeric';\n      case QuestionMetaDataType.Date:\n      default:\n        return 'default';\n    }\n  };\n\n  const metadataTypeAutoCapitalize = (\n    metadataType: TypeQuestionMetaDataType | undefined\n  ) => {\n    switch (metadataType) {\n      case QuestionMetaDataType.Name:\n        return 'words';\n      case QuestionMetaDataType.Email:\n      case QuestionMetaDataType.Phone:\n      case QuestionMetaDataType.Date:\n      case QuestionMetaDataType.Number:\n        return 'none';\n      default:\n        return 'sentences';\n    }\n  };\n  return {\n    metadataTypeKeyboard,\n    metadataTypeAutoCapitalize,\n\n    text,\n    isFocus,\n    hasEdited,\n\n    onChangeTextHandler,\n    onEndEditingHandler,\n    onFocus: () => setIsFocus(true),\n    onBlur: () => setIsFocus(false),\n  };\n};\n\nexport default useOpenEnded;\n"]}