{"version":3,"sources":["StartScreen.tsx"],"names":["React","useEffect","useState","ScrollView","View","Text","Image","StyleSheet","TouchableOpacity","Colors","DimensionWidthType","useDimensionWidthType","useTheme","useSafeAreaInsets","getLanguageBy","i18n","defaultIconSource","require","defaultIconSize","phone","tablet","StartScreen","onLanguageSelect","onClose","onStart","survey","insets","dimensionWidthType","hexCode","fontColor","backgroundColor","surveyProperty","surveyName","welcomeTextPlain","language","takeSurvey","image","imageHeight","setImageHeight","iconStyle","width","height","getSize","_","iconSource","undefined","uri","iconView","languagesView","languages","length","languageView","map","lang","index","styles","language_label","color","buttonStyle","button","borderRadius","containerStyle","headerContainer","paddingTop","top","titleStyle","headerTitle","headerIconStyle","tintColor","startTextStyle","buttonTitle","lineHeight","container","headerRowContainer","closeButton","main","title","subtitle","create","white","flex","alignItems","justifyContent","paddingHorizontal","textAlign","marginTop","fontSize","opacity","paddingVertical","overflow","fontWeight","letterSpacing","flexDirection","maxHeight","flexWrap","marginHorizontal","marginLeft","marginRight","flexGrow"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  ScrollView,\n  View,\n  Text,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n} from 'react-native';\nimport { Colors } from '../styles';\nimport {\n  DimensionWidthType,\n  useDimensionWidthType,\n} from '../hooks/useWindowDimensions';\nimport { useTheme } from '../contexts/theme';\nimport type { Survey as OriginSurvey } from '../data';\n// @ts-ignore\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { getLanguageBy } from '../utils/LanguageUtils';\nimport i18n from '../translation';\n\ntype Survey = OriginSurvey & {\n  languages: string[];\n};\n\nconst defaultIconSource = require('../assets/rating.png');\nconst defaultIconSize = {\n  [DimensionWidthType.phone]: 65,\n  [DimensionWidthType.tablet]: 72,\n};\n\ntype Props = {\n  onLanguageSelect: (language: string) => void;\n  onClose: () => void;\n  onStart: () => void;\n  survey: Survey;\n};\n\nconst StartScreen = ({ onLanguageSelect, onClose, onStart, survey }: Props) => {\n  const insets = useSafeAreaInsets();\n  const dimensionWidthType = useDimensionWidthType();\n  const { hexCode, fontColor, backgroundColor } = useTheme();\n\n  const { surveyProperty, surveyName, welcomeTextPlain, language, takeSurvey } =\n    survey;\n  const { image } = surveyProperty;\n\n  const [imageHeight, setImageHeight] = useState(65);\n  const iconStyle = {\n    width: '100%',\n    height: imageHeight,\n  };\n\n  useEffect(() => {\n    Image.getSize(\n      image,\n      (_, height) => {\n        if (height < defaultIconSize[dimensionWidthType]) {\n          setImageHeight(height);\n        }\n      },\n      (_) => {}\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const iconSource = image === undefined ? defaultIconSource : { uri: image };\n\n  const iconView = (\n    <Image resizeMode=\"contain\" style={iconStyle} source={iconSource} />\n  );\n\n  const languagesView = () => {\n    const { languages } = survey;\n\n    // if there's only one language or no languages, no need to display\n    if (!languages || !languages.length || languages.length <= 1) return null;\n\n    const languageView = languages.map((lang, index) => (\n      <TouchableOpacity\n        key={index}\n        onPress={() => {\n          onLanguageSelect && onLanguageSelect(lang);\n        }}\n      >\n        <Text\n          style={[\n            styles.language_label,\n            {\n              color: lang !== language ? hexCode : fontColor,\n            },\n          ]}\n        >\n          {getLanguageBy(lang)}\n        </Text>\n      </TouchableOpacity>\n    ));\n    return <View style={styles.languages}>{languageView}</View>;\n  };\n  const buttonStyle = [\n    styles.button,\n    {\n      backgroundColor: hexCode,\n      borderRadius: i18n.language === 'te' ? 25 : 20,\n    },\n  ];\n\n  const containerStyle = [\n    styles.headerContainer,\n    { paddingTop: insets.top },\n    {\n      backgroundColor,\n    },\n  ];\n  const titleStyle = [styles.headerTitle, { color: fontColor }];\n  const headerIconStyle = { tintColor: hexCode };\n  const startTextStyle = [\n    styles.buttonTitle,\n    {\n      lineHeight: i18n.language === 'te' ? 26 : undefined,\n    },\n  ];\n  return (\n    <ScrollView contentContainerStyle={[styles.container, { backgroundColor }]}>\n      <View style={containerStyle}>\n        <View style={styles.headerRowContainer}>\n          <TouchableOpacity style={styles.closeButton} onPress={onClose}>\n            <Image\n              style={headerIconStyle}\n              source={require('../assets/icClose24Px.png')}\n            />\n          </TouchableOpacity>\n          <Text style={titleStyle} numberOfLines={1}>\n            {surveyName}\n          </Text>\n        </View>\n      </View>\n      <View style={styles.main}>\n        {iconView}\n        <Text style={[styles.title, { color: fontColor }]}>{surveyName}</Text>\n        {!!welcomeTextPlain && (\n          <Text style={[styles.subtitle, { color: fontColor }]}>\n            {welcomeTextPlain}\n          </Text>\n        )}\n        <TouchableOpacity style={buttonStyle} onPress={onStart}>\n          <Text style={startTextStyle}>{takeSurvey}</Text>\n        </TouchableOpacity>\n      </View>\n      {languagesView()}\n    </ScrollView>\n  );\n};\n\nexport default StartScreen;\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: Colors.white,\n    flex: 1,\n    alignItems: 'center',\n  },\n  main: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingHorizontal: 38,\n    width: '100%',\n  },\n  title: {\n    textAlign: 'center',\n    marginTop: 12,\n    fontSize: 24,\n    opacity: 0.9,\n    lineHeight: 27,\n  },\n  subtitle: {\n    lineHeight: 23,\n    marginTop: 12,\n    fontSize: 16,\n    textAlign: 'center',\n    opacity: 0.72,\n  },\n  button: {\n    marginTop: 31,\n    paddingVertical: 12,\n    paddingHorizontal: 30,\n    borderRadius: 20,\n    overflow: 'hidden',\n  },\n  buttonTitle: {\n    color: Colors.white,\n    fontSize: 16,\n    fontWeight: '500',\n    letterSpacing: 0,\n    textAlign: 'center',\n  },\n  language_label: {\n    fontSize: 13,\n    paddingHorizontal: 8,\n  },\n  languages: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    height: '12%',\n    maxHeight: 90,\n    flexWrap: 'wrap',\n    marginHorizontal: 30,\n  },\n  headerContainer: {\n    width: '100%',\n    paddingVertical: 15,\n    paddingHorizontal: 30,\n  },\n  headerRowContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    height: 25,\n    marginTop: 17,\n  },\n  closeButton: {\n    width: 25,\n    height: 25,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  headerTitle: {\n    fontSize: 17,\n    fontWeight: '600',\n    marginLeft: 10,\n    marginRight: 30,\n    textAlign: 'center',\n    flexGrow: 1,\n  },\n});\n"]}