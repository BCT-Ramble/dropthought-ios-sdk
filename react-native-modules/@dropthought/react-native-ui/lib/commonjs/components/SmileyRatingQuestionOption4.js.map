{"version":3,"sources":["SmileyRatingQuestionOption4.tsx"],"names":["SmileyRatingQuestionOption4","survey","pageIndex","question","forgot","onClose","onPrevPage","onNextPage","onFeedback","windowHeight","Dimensions","get","height","questionId","scale","options","selectedIndex","setSelectedIndex","React","useState","score","setScore","isLoop","setIsLoop","loopLotties","setLoopLotties","transformLotties","setTransformLotties","scoreContainerOpacity","useRef","Animated","Value","current","scoreOpacity","descriptionYAxis","totalScore","Number","renderScore","hasEdited","scaleLogicList","scaleLogic","lottieSelectedIndex","faceTable","loopList","map","value","scaleKey","String","loopFaceTable","transformList","index","array","fromScale","toScale","key","transformTable","imageLignt","require","imageDark","updateScore","useCallback","number","isAtCoverScreen","newScore","setValue","sequence","timing","toValue","duration","useNativeDriver","start","answers","type","backgroundColor","fontColor","colorScheme","dimensionWidthType","isPhone","DimensionWidthType","phone","styles","phoneStyles","tabletStyles","containerStyle","commonStyles","container","lottieContainerStyle","lottieContainer","opacity","scoreSelectedStyle","scoreSelected","color","descStyle","desc","transform","translateY","scoreTotalStyle","scoreTotal","hintContainerStyle","hintContainer","hintTextStyle","hintText","hintSubTextStyle","hintSubText","isCancel","infoImage","COLOR_SCHEMES","dark","scoreContainer","scoreText","contentContainer","i18n","t","count","surveyProperty","hexCode","pageOrder","length","StyleSheet","create","flex","paddingHorizontal","flexDirection","alignItems","Colors","white","paddingBottom","width","marginBottom","justifyContent","fontSize","fontWeight","textAlign","smileyRatingScoreGray"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  View,\n  StyleSheet,\n  Text,\n  TouchableWithoutFeedback,\n  Animated,\n  TouchableOpacity,\n  Dimensions,\n  Image,\n} from 'react-native';\nimport { Colors } from '../styles';\nimport i18n from '../translation';\nimport {\n  DimensionWidthType,\n  useDimensionWidthType,\n} from '../hooks/useWindowDimensions';\nimport type { Question as OriginQuestion, Survey } from '../data';\nimport LottieView from 'lottie-react-native';\nimport SurveyFooter from '../containers/SurveyFooter';\nimport SurveyHeader from '../containers/SurveyHeader';\nimport { useTheme, COLOR_SCHEMES } from '../contexts/theme';\nimport MandatoryTitle from './MandatoryTitle';\nimport {\n  scaleLogic,\n  option4LoopFaceTable as loopFaceTable,\n  option4TransformTable as transformTable,\n} from '../utils/data';\n\ntype Question = OriginQuestion & {\n  options: string[];\n  scale: string;\n};\n\ntype Props = {\n  survey: Survey;\n  pageIndex: number;\n  question: Question;\n  forgot: boolean;\n  onClose: () => void;\n  onPrevPage: () => void;\n  onNextPage: () => void;\n  onFeedback: ({\n    questionId,\n    answers,\n    type,\n  }: {\n    questionId: string;\n    answers: number[];\n    type: string;\n  }) => void;\n};\n\nconst SmileyRatingQuestionOption4 = ({\n  survey,\n  pageIndex,\n  question,\n  forgot,\n  onClose,\n  onPrevPage,\n  onNextPage,\n  onFeedback,\n}: Props) => {\n  const windowHeight = Dimensions.get('window').height;\n  const { questionId, scale, options } = question;\n  const [selectedIndex, setSelectedIndex] = React.useState<number>(0);\n  const [score, setScore] = React.useState<number>(-1);\n  const [isLoop, setIsLoop] = React.useState<boolean>(true);\n  const [loopLotties, setLoopLotties] = React.useState<string[]>([]);\n  const [transformLotties, setTransformLotties] = React.useState<string[]>([]);\n  const scoreContainerOpacity = React.useRef(new Animated.Value(0)).current;\n  const scoreOpacity = React.useRef(new Animated.Value(0)).current;\n  const descriptionYAxis = React.useRef(\n    new Animated.Value(windowHeight / 2 - 246 + 37)\n  ).current;\n  // 37 -> one text line height\n  // 246 -> Padding Vertical 123\n\n  const totalScore = Number(scale);\n  const renderScore = score + 1;\n  const hasEdited = score >= 0;\n\n  // choose which scale logic we want to use.\n  const scaleLogicList = scaleLogic[scale];\n  const lottieSelectedIndex = scaleLogicList[selectedIndex];\n\n  useEffect(() => {\n    const faceTable = ['A', 'B', 'C', 'D', 'E'];\n\n    const loopList = scaleLogicList.map((value) => {\n      const scaleKey = String(value + 1) + faceTable[value];\n      return loopFaceTable.get(scaleKey);\n    });\n\n    const transformList = scaleLogicList.map((value, index, array) => {\n      if (index === 0) return '';\n      const fromScale =\n        String(array[index - 1] + 1) + faceTable[array[index - 1]];\n      const toScale = String(value + 1) + faceTable[value];\n      const key = `${fromScale}-${toScale}`;\n      return transformTable.get(key);\n    });\n\n    setLoopLotties(loopList);\n    setTransformLotties(transformList);\n  }, [scaleLogicList]);\n\n  const imageLignt = require('../assets/icOption4Info.png');\n  const imageDark = require('../assets/icOption4InfoDark.png');\n\n  const updateScore = React.useCallback(\n    (number) => {\n      const isAtCoverScreen = score === -1;\n      const newScore = score + number;\n      setScore(newScore);\n      if (number > 0 && !isAtCoverScreen) {\n        setIsLoop(false);\n      }\n      if (!isAtCoverScreen) {\n        setSelectedIndex(newScore);\n      }\n\n      //animtaion--\n      scoreOpacity.setValue(0);\n      if (isAtCoverScreen) {\n        Animated.sequence([\n          Animated.timing(descriptionYAxis, {\n            toValue: 0,\n            duration: 500,\n            useNativeDriver: true,\n          }),\n          Animated.timing(scoreContainerOpacity, {\n            toValue: 1,\n            duration: 500,\n            useNativeDriver: true,\n          }),\n          Animated.timing(scoreOpacity, {\n            toValue: 1,\n            duration: 500,\n            useNativeDriver: true,\n          }),\n        ]).start();\n      } else {\n        Animated.timing(scoreOpacity, {\n          toValue: 1,\n          duration: 500,\n          useNativeDriver: true,\n        }).start();\n      }\n      //animtaion--\n\n      onFeedback({\n        questionId,\n        answers: [newScore],\n        type: 'rating',\n      });\n    },\n    [\n      score,\n      scoreOpacity,\n      onFeedback,\n      questionId,\n      descriptionYAxis,\n      scoreContainerOpacity,\n    ]\n  );\n  const { backgroundColor, fontColor, colorScheme } = useTheme();\n\n  const dimensionWidthType = useDimensionWidthType();\n  const isPhone = dimensionWidthType === DimensionWidthType.phone;\n  const styles = isPhone ? phoneStyles : tabletStyles;\n\n  const containerStyle = [commonStyles.container, { backgroundColor }];\n\n  const lottieContainerStyle = [\n    commonStyles.lottieContainer,\n    { opacity: scoreContainerOpacity },\n  ];\n\n  const scoreSelectedStyle = [\n    styles.scoreSelected,\n    { opacity: scoreOpacity, color: fontColor },\n  ];\n\n  const descStyle = [\n    styles.desc,\n    {\n      transform: [{ translateY: descriptionYAxis }],\n      opacity: scoreContainerOpacity,\n      color: fontColor,\n    },\n  ];\n\n  const scoreTotalStyle = [\n    styles.scoreTotal,\n    { opacity: scoreContainerOpacity, color: fontColor },\n  ];\n\n  const hintContainerStyle = hasEdited ? null : commonStyles.hintContainer;\n\n  const hintTextStyle = [commonStyles.hintText, { color: fontColor }];\n\n  const hintSubTextStyle = [commonStyles.hintSubText, { color: fontColor }];\n\n  const lottieContainer = (\n    <Animated.View style={lottieContainerStyle}>\n      <TouchableWithoutFeedback\n        onPress={() => {\n          // Add isLoop to avoid when face transform and user tap the star.\n          if (score > 0 && isLoop) updateScore(-1);\n        }}\n      >\n        <LottieView\n          source={\n            isLoop\n              ? loopLotties[lottieSelectedIndex]\n              : transformLotties[lottieSelectedIndex]\n          }\n          autoPlay\n          loop={isLoop}\n          onAnimationFinish={(isCancel) => {\n            if (!isCancel) setIsLoop(true);\n          }}\n        />\n      </TouchableWithoutFeedback>\n    </Animated.View>\n  );\n\n  const infoImage = (\n    <Image\n      style={commonStyles.infoImage}\n      source={colorScheme === COLOR_SCHEMES.dark ? imageDark : imageLignt}\n    />\n  );\n\n  const scoreContainer = (\n    <TouchableWithoutFeedback\n      onPress={() => {\n        if (renderScore < totalScore) updateScore(1);\n      }}\n      style={commonStyles.scoreContainer}\n    >\n      <View style={commonStyles.scoreContainer}>\n        <View style={commonStyles.scoreText}>\n          <Animated.Text style={scoreSelectedStyle}>\n            {renderScore}\n          </Animated.Text>\n          <Animated.Text style={scoreTotalStyle}>\n            {'/' + totalScore}\n          </Animated.Text>\n        </View>\n        <Animated.Text style={descStyle}>\n          {options[selectedIndex]}\n        </Animated.Text>\n      </View>\n    </TouchableWithoutFeedback>\n  );\n\n  return (\n    <>\n      <SurveyHeader\n        survey={survey}\n        pageIndex={pageIndex}\n        backgroundColor={backgroundColor}\n        onClose={onClose}\n      />\n      <View style={containerStyle}>\n        <MandatoryTitle question={question} forgot={forgot} />\n        <View style={commonStyles.contentContainer}>\n          {hasEdited ? (\n            <>\n              {lottieContainer}\n              {scoreContainer}\n            </>\n          ) : null}\n          <TouchableOpacity\n            style={hintContainerStyle}\n            disabled={score > -1}\n            onPress={() => updateScore(1)}\n          >\n            <>\n              {hasEdited ? null : infoImage}\n              <Text style={hintTextStyle}>\n                {i18n.t('option4HintDescription:title')}\n              </Text>\n              <Text style={hintSubTextStyle}>\n                {i18n.t('option4HintDescription:subTitle', {\n                  count: totalScore,\n                })}\n              </Text>\n            </>\n          </TouchableOpacity>\n        </View>\n      </View>\n      <SurveyFooter\n        surveyColor={survey.surveyProperty.hexCode}\n        isFirstPage={pageIndex === 0}\n        isLastPage={pageIndex === survey.pageOrder.length - 1}\n        onPrevPage={onPrevPage}\n        onNextPage={onNextPage}\n        backgroundColor={backgroundColor}\n      />\n    </>\n  );\n};\n\nexport default SmileyRatingQuestionOption4;\n\nconst commonStyles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 42,\n    flexDirection: 'column',\n    alignItems: 'center',\n    backgroundColor: Colors.white,\n    paddingBottom: 7,\n  },\n  contentContainer: {\n    width: '100%',\n    flex: 5,\n    alignItems: 'center',\n  },\n  infoImage: {\n    marginBottom: 30,\n  },\n  hintContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hintText: {\n    fontSize: 16,\n    fontWeight: '500',\n    textAlign: 'center',\n    marginBottom: 6,\n  },\n  hintSubText: {\n    fontSize: 12,\n    fontWeight: '400',\n    textAlign: 'center',\n  },\n  lottieContainer: {\n    height: 60,\n    width: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  scoreContainer: {\n    flex: 3,\n    width: '100%',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  scoreText: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'baseline',\n  },\n});\n\nconst phoneStyles = StyleSheet.create({\n  desc: {\n    fontSize: 20,\n    fontWeight: '600',\n    textAlign: 'center',\n  },\n  scoreSelected: {\n    fontSize: 74,\n    textAlign: 'center',\n    alignItems: 'baseline',\n  },\n  scoreTotal: {\n    fontSize: 55,\n    color: Colors.smileyRatingScoreGray,\n  },\n});\n\nconst tabletStyles = StyleSheet.create({\n  desc: {\n    fontSize: 20,\n    fontWeight: '600',\n    textAlign: 'center',\n  },\n  scoreSelected: {\n    fontSize: 74,\n    textAlign: 'center',\n    alignItems: 'baseline',\n  },\n  scoreTotal: {\n    fontSize: 55,\n    color: Colors.smileyRatingScoreGray,\n  },\n});\n"]}